<div class="survey-view">

  <div class="row">

    <div class="col-xs-12">
      <div class="page-header">
        <div *ngIf="survey && survey.conceptId">
          <div class="view-title"> {{survey.domainDisplay}} Survey Module ({{survey.conceptId}}) </div>
          <div class="view-sub-title">{{survey.domainDesc}} </div>
        </div>
      </div>
    </div>

  </div>

  <div class="row">
    <div *ngIf="survey && survey.conceptId" class="col-xs-12 col-sm-6 col-md-4">
      <div class="card stats-card">

        <div class="card-block card-title">
              Number Completed
        </div>
        <div class="card-block card-stat">
          {{survey.numParticipants | number }}
        </div>

      </div>
    </div>
    <div *ngIf="(resultsComplete )" class="col-md-3 col-sm-4 col-xs-12">
      <div class="card stats-card">

        <div class="card-block card-title">
          Questions
        </div>
        <div class="card-block card-stat">
          {{ surveyResult.items.length }}
        </div>

      </div>
    </div>
  </div>

  <div class="search-input-big">
    <clr-icon shape="search" class="input-icon is-info"></clr-icon>
    <input type="text" id="search-db" placeholder="Keyword Search" [(ngModel)]="searchText" (ngModelChange)="filterResults()">
  </div>

  <h6> Filtered by {{searchText}}</h6>

  <div class="survey-results" *ngIf="resultsComplete">

    <div class="survey-results-background"></div>
    <div class="container">
    <!-- Search box is not working inside this with the survey background
      <div class="search-input-big">
        <clr-icon shape="search" class="input-icon is-info"></clr-icon>
        <input type="text" id="search-db" placeholder="Keyword Search">
      </div> -->
      <div class="box-sub-title"> Click on each response to view branding logic and age and gender distributions</div>
      <div class="row question-result" *ngFor="let q of questions, let i = index">
        <div class="row question-card">
          <div class="col-md-6 col-xs-12 col-sm-12">
            <div class="box-title"> Question {{i + 1}}</div>
            <div class="box-sub-title"> {{ q.conceptName}} ({{q.conceptId}}) </div>
          </div>
          <div class="col-md-4 offset-md-2 col-xs-12 col-sm-12">
            <div class="response-dist" style="height:200px">
              <app-chart *ngIf="q.countAnalysis" [analysis]="q.countAnalysis" ></app-chart>
            </div>
          </div>

          <div class="row answers">
            <div class="col-xs-12">
              <clr-stack-view class="answers">
                <clr-stack-block [clrSbExpanded]="false">
                  <clr-stack-label>See Answers</clr-stack-label>
                  <clr-stack-block>
                    <clr-stack-label> <h6> Here is a stack block </h6></clr-stack-label>
                  </clr-stack-block>
                </clr-stack-block>
              </clr-stack-view>
            </div>
          </div>

        </div>

      </div>
    </div>

  </div>

</div>
