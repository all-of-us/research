<ng-container [clrLoading]="loading">
  <clr-tree-node *ngIf="hasError">
    <em>Error! Oh Noes!</em>
  </clr-tree-node>

  <clr-tree-node *ngFor="let child of children">
    <div class="clr-treenode-link flex-container">
      <div class="item-info">
        <div class="code">
          <small class="font-weight-bold">
            {{ displayCode(child) }}
          </small>
        </div>
        <div class="name">
          <small class="text-muted">
            {{ displayName(child) }}
          </small>
        </div>
      </div>

      <div class="item-meta">
        <span
           *ngIf="nonZeroCount(child)"
           class="badge badge-info">
          {{ child.get('count') }}
        </span>

        <ng-container *ngIf="selectable(child)">
          <ng-container [ngSwitch]="selectability(child)">
            <button
              *ngSwitchCase="'disabled'"
              type="button"
              class="btn btn-sm btn-link"
              [disabled]="true"
              [style.margin]="'0 0 0 0'"
              [style.color]="'rgb(98, 164, 32)'">
              <clr-icon shape="check-circle" size="20"></clr-icon>
            </button>

            <button
              *ngSwitchCase="'basic'"
              type="button"
              class="btn btn-sm btn-link"
              [style.margin]="'0 0 0 0'"
              [style.color]="'rgb(98, 164, 32)'"
              (click)="select(child)">
              <clr-icon shape="plus-circle" size="20"></clr-icon>
            </button>

            <button
              *ngSwitchCase="'attrs'"
              type="button"
              class="btn btn-sm btn-link"
              [style.margin]="'0 0 0 0'"
              (click)="select(child)">
              <clr-icon shape="cog" size="20"></clr-icon>
            </button>
          </ng-container>
        </ng-container>

      </div>
    </div>
    <ng-template clrIfExpanded *ngIf="child.get('group')">
      <crit-tree [node]="child"></crit-tree>
    </ng-template>
  </clr-tree-node>
</ng-container>
