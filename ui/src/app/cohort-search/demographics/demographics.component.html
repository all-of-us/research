<form class="form-container" [class.age]="subtype === treeSubType.AGE" [formGroup]="demoForm" [ngSwitch]="subtype">
  <!-- Age -->
  <div *ngSwitchCase="treeSubType.AGE">
    <div class="age-label">
      Age Range
    </div>
    <div class="control-wrapper slider-wrapper" [class.disabled]="deceased.value">
      <input type="number"
             id="min-age"
             [min]="minAge" [max]="maxAge"
             formControlName="ageMin"
             class="number-display"
             (blur)="checkMin()">
      <div class="slider">
        <div id="count-wrapper">
            <span *ngIf="ageCount" id="age-count" class="badge badge-info">
              {{ ageCount | number }}
            </span>
        </div>
        <nouislider
                [min]="minAge" [max]="maxAge" [step]="1"
                [behaviour]="'drag'"
                [connect]="true"
                (slide)="centerAgeCount()"
                [formControl]="demoForm.controls.ageRange">
        </nouislider>
      </div>
      <input type="number"
             id="max-age"
             [min]="minAge" [max]="maxAge"
             formControlName="ageMax"
             class="number-display"
             (blur)="checkMax()">
    </div>

    <clr-checkbox formControlName="deceased">
      Is Deceased
      <span *ngIf="deceasedNode" class="badge badge-info">
        {{ deceasedNode.get('count') | number }}
      </span>
    </clr-checkbox>
  </div>

  <!-- Genders -->
    <div *ngSwitchCase="treeSubType.GEN">
      <div class="demo-title">
        Gender
      </div>
      <div class="control-wrapper">
        <crit-multi-select
                (addedItems)="getItems($event)"
                [options]="genderNodes"
                [getParamId]="selectedParamId"
                [includeSearchBox]="false"
                [initialSelection]="initialGenders"
                [loading]="loading.GEN">
        </crit-multi-select>
      </div>
    </div>

    <!-- Races -->
    <div *ngSwitchCase="treeSubType.RACE">
      <div class="demo-title">
        Race
      </div>
      <div class="control-wrapper">
        <crit-multi-select
                (addedItems)="getItems($event)"
                [options]="raceNodes"
                [includeSearchBox]="false"
                [getParamId]="selectedParamId"
                [initialSelection]="initialRaces"
                [loading]="loading.RACE">
        </crit-multi-select>
      </div>
    </div>

    <!-- Ethnicities -->
    <div *ngSwitchCase="treeSubType.ETH">
      <div class="demo-title">
        Ethnicity
      </div>
      <div class="control-wrapper">
        <crit-multi-select
                (addedItems)="getItems($event)"
                [includeSearchBox]="false"
                [options]="ethnicityNodes"
                [getParamId]="selectedParamId"
                [initialSelection]="initialEthnicities"
                [loading]="loading.ETH">
        </crit-multi-select>
      </div>
    </div>
</form>
<div class="container count-preview" *ngIf="!noSelection && subtype !== treeSubType.AGE">
  <div class="row">
    <div class="col-lg-1 " *ngIf="showCalculateContainer || preview.get('requesting')">
       <span class="spinner spinner-md">
    </span>
    </div>
    <div class="col-lg-2 calculate-button" *ngIf="showCalculateContainer || preview.get('requesting')">
      Calculating ...
    </div>
    <ng-container *ngIf="!preview.get('requesting') && !showCalculateContainer">
      <div class="col-lg-6 text-padding" *ngIf="preview.get('count') >= 0 || count">
        <div class="result-text">
          Results
        </div>
        <div>
          Number Participants:
          <span class="text-bold" *ngIf="preview.get('count') >= 0;else totalcount">
       {{ preview.get('count', 0) | number }}
        </span>
          <ng-template #totalcount>
            <span class="text-bold">
                {{count | number}}
            </span>
          </ng-template>
        </div>
      </div>
    </ng-container>
  </div>
</div>

