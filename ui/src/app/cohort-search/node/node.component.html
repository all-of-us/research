<clr-tree-node *ngIf="!secondLevel">
  <div [id]="nodeId" class="clr-treenode-link container" (click)="toggleExpanded()">
    <crit-node-info [node]="node"></crit-node-info>
  </div>

  <ng-template *ngIf="node.get('group') && !fullTree"
    [(clrIfExpanded)]="expanded"
    (clrIfExpandedChange)="loadChildren($event)">
    <ng-container [clrLoading]="loading">
      <div class="node-list">
        <div *ngIf="error || empty" class="alert alert-warning">
          <div class="alert-items">
            <div class="alert-item static">
              <div class="alert-icon-wrapper">
                <clr-icon class="alert-icon" shape="exclamation-triangle"></clr-icon>
              </div>
              <span class="alert-text">
                A problem occurred and we were not able to retrieve the requested data
              </span>
            </div>
          </div>
        </div>
        <crit-node *ngFor="let item of children" [node]="item"></crit-node>
      </div>
    </ng-container>
  </ng-template>

  <!-- Loads the entire tree instead of loading children when the parent node is expanded -->
  <ng-template *ngIf="node.get('group') && fullTree"
    [clrIfExpanded]="expanded">
    <ng-container>
      <div class="node-list">
        <crit-node *ngFor="let item of node.get('children')" [node]="item"></crit-node>
      </div>
    </ng-container>
  </ng-template>
</clr-tree-node>

<!-- Skip first level of the tree and go straight to the second level -->
<div *ngIf="secondLevel">
  <crit-node *ngFor="let item of children" [node]="item"></crit-node>
  <div *ngIf="loading" class="spinner root-spinner">
    Loading...
  </div>
</div>
