<form (ngSubmit)="createAccount()" *ngIf="!accountCreated">
  <h2>Create your account</h2>
  <div class="form-area">
    <div class="form-section">
      <input type="text" class="long-input" id="givenName" name="givenName" autofocus [(ngModel)]="profile.givenName" placeholder="Given Name">
    </div>
    <div class="form-section">
      <input type="text" class="long-input" id="familyName" name="familyName" [(ngModel)]="profile.familyName" placeholder="Family Name">
    </div>
    <div class="form-section">
      <input type="text" class="long-input" id="contactEmail" name="contactemail" [(ngModel)]="profile.contactEmail" (ngModelChange)="contactEmailChanged()" placeholder="Email Address">
      <div *ngIf="contactEmailConflictError" class="error">
        Contact Email is already in use.
      </div>
    </div>
    <div class="form-section">
      <input type="text" class="short-input" id="username" name="username" [(ngModel)]="profile.username" (ngModelChange)="usernameChanged()" placeholder="Username">
      <h5 style="display: inline-block;" class="domain">@{{gsuiteDomain}}</h5>
      <clr-tooltip>
        <clr-icon clrTooltipTrigger shape="info-standard" class="is-solid info-icon"></clr-icon>
        <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
          <div>
            Usernames can contain letters (a-z), numbers (0-9), dashes (-), underscores (_),
            apostrophies ('), and periods (.).
          </div>
          <br>
          <div>
            Usernames can't contain an ampersand (&), equal sign (=), brackets (<,>), plus sign (+),
            comma (,), or more than one period (.) in a row.
          </div>
          <br>
          <div>
            Usernames can begin or end with non-alphanumeric characters except (.), with a maximum
            of 64 characters.
          </div>
        </clr-tooltip-content>
      </clr-tooltip>
      <div *ngIf="usernameConflictError" class="error">
        Username is already taken.
      </div>
    </div>
    <div class="form-section">
      <input type="password" class="short-input" id="password" name="password" [(ngModel)]="password" placeholder="Password">
      <div class="hint-section">
        <!-- TODO (blrubenstein) Put info icon here -->
        <div style="font-size: 8pt; line-height: 0.6rem;">Contains at least one lowercase and one uppercase letter</div>
      </div>
    </div>
    <div class="form-section">
      <input type="password" class="short-input" for="passwordAgain" name="passwordAgain" [(ngModel)]="passwordAgain" placeholder="Confirm Password">
    </div>

    <div class="form-section">
      <button type="submit"
          class="btn btn-primary short-button"
          [disabled]="creatingAccount"
          [clrLoading]="creatingAccount">
        Next
      </button>
    </div>
    <div *ngIf="showAllFieldsRequiredError" class="error">
      All fields are required.
    </div>
    <div *ngIf="showPasswordsDoNotMatchError" class="error">
      Passwords do not match.
    </div>
    <div *ngIf="showPasswordLengthError" class="error">
      Password must be between 8 and 100 characters long.
    </div>
    <div *ngIf="containsLowerAndUpperError" class="error">
      Password must contain one lowercase and one uppercase letter.
    </div>
  </div>
</form>
<div *ngIf="accountCreated">
  <app-account-creation-success></app-account-creation-success>
</div>
