<form (ngSubmit)="createAccount()" *ngIf="!accountCreated">
  <h2>Create your account</h2>
  <div class="form-area">
    <div class="form-section">
      <input type="text" class="long-input" id="givenName" name="givenName" autofocus [(ngModel)]="profile.givenName" placeholder="Given Name">
    </div>
    <div class="form-section">
      <input type="text" class="long-input" id="familyName" name="familyName" [(ngModel)]="profile.familyName" placeholder="Family Name">
    </div>
    <div class="form-section">
      <input type="text" class="long-input" id="contactEmail" name="contactemail" [(ngModel)]="profile.contactEmail" placeholder="Contact Email Address">
    </div>
    <div class="form-section">
      <input type="text" class="long-input" id="username" name="username"
             [(ngModel)]="profile.username" (ngModelChange)="usernameChanged()" (blur)="leaveFocusUsername()"
             (focus)="enterFocusUsername()" placeholder="New Username"
             [ngClass]="{'successfulInput': showUsernameValidationSuccess, 'unsuccessfulInput': showUsernameValidationError}">
      <div class="icon-area">
        <clr-icon shape="warning-standard" class="warning-standard is-solid" *ngIf="showUsernameValidationError"></clr-icon>
        <clr-icon shape="success-standard" class="success-standard is-solid" *ngIf="showUsernameValidationSuccess"></clr-icon>
      </div>
      <clr-tooltip>
        <clr-icon clrTooltipTrigger shape="info-standard" class="is-solid info-icon"></clr-icon>
        <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
          <div>
            Usernames can contain only letters (a-z), numbers (0-9), dashes (-), underscores (_),
            apostrophes ('), and periods (.) (maximum of 64 characters).
          </div>
          <br>
          <div>
            Usernames cannot begin or end with a period (.) and may not contain more than one
            period (.) in a row.
          </div>
        </clr-tooltip-content>
      </clr-tooltip>
      <div *ngIf="usernameConflictError && usernameOffFocus" class="error" id="username-taken-error">
        Username is already taken.
      </div>
      <div *ngIf="usernameInvalidError && usernameOffFocus" class="error" id="username-invalid-error">
        Username is not a valid username.
      </div>
    </div>
    <div class="form-section">
      <button type="submit"
          class="btn btn-primary short-button"
          [disabled]="creatingAccount"
          [clrLoading]="creatingAccount">
        Next
      </button>
    </div>
    <div *ngIf="showAllFieldsRequiredError" class="error">
      All fields are required.
    </div>
  </div>
</form>
<div *ngIf="accountCreated">
  <app-account-creation-success [contactEmail]="profile.contactEmail"></app-account-creation-success>
</div>
