version: "2"
options:
  compose-file-path: 'docker-compose.yml'
  # optional, activate this if you need to debug something, default is false
  verbose: false
  # optional, default: pwd, root directory to be used when transforming sync src into absolute path, accepted values: pwd (current working directory), config_path (the directory where docker-sync.yml is found)
  project_root: 'pwd'

syncs:
  src-sync:
    # enable terminal_notifier. On every sync sends a Terminal Notification regarding files being synced. ( Mac Only ).
    # good thing in case you are developing and want to know exactly when your changes took effect.
    # be aware in case of unison this only gives you a notification on the initial sync, not the syncs after changes.
    notify_terminal: false
    src: '..'
    host_disk_mount_mode: 'cached' # see https://docs.docker.com/docker-for-mac/osxfs-caching/#cached
    # optional, a list of excludes. These patterns will not be synced
    # see http://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#ignore for the possible syntax and see sync_excludes_type below
    sync_excludes: [
      '.gradle',
      '.idea',
      'api/build',
      'api/out',
      'api/src/generated',
      'appengine-cron-emulator/build',
      'common-api/build',
      'common-api/out',
      'node_modules',
      'tsc-app',
      'tsc-out',
      'ui/coverage',
      'ui/dist',
      'ui/src/generated',
      'ui/src/notebooks-generated'
    ]
    # For AoU, we need docker-sync to write files with the same userid used by the container. We have
    # other machinery that causes our Docker containers to run as the host userid. Using the 'from_host'
    # option here causes docker-sync to do the same.
    sync_userid: 'from_host'
    sync_groupid: 'from_host'
